# =============================================================================
# Memory Store Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# Never commit .env files to version control!

# =============================================================================
# API Keys and Authentication
# =============================================================================

# Voyage AI API Key for generating embeddings
# Get your key from: https://www.voyageai.com/
VOYAGE_API_KEY=your_voyage_api_key_here

# Optional: OpenAI API key for fallback embedding generation
# OPENAI_API_KEY=your_openai_api_key_here

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL connection string with pgvector extension
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://memory_user:memory_pass@postgres-vector:5432/memory_store

# Individual database components (used by Docker Compose)
POSTGRES_DB=memory_store
POSTGRES_USER=memory_user
POSTGRES_PASSWORD=memory_pass

# Database connection pool settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# =============================================================================
# Document Processing Configuration
# =============================================================================

# Path to documents directory (can be mounted volume)
DOCS_PATH=/app/docs

# Document chunking settings
CHUNK_SIZE=512
CHUNK_OVERLAP=50
MAX_CHUNK_SIZE=1000
MIN_CHUNK_SIZE=100

# Processing batch settings
BATCH_SIZE=10
MAX_CONCURRENT_PROCESSES=4

# File monitoring settings
WATCH_EXTENSIONS=.md,.txt,.rst
IGNORE_PATTERNS=.git,node_modules,__pycache__,.DS_Store

# =============================================================================
# Search API Configuration
# =============================================================================

# API server settings
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# Search result limits
MAX_RESULTS=20
DEFAULT_RESULTS=10
SIMILARITY_THRESHOLD=0.7

# Search weights for hybrid search
SEMANTIC_WEIGHT=0.7
FULLTEXT_WEIGHT=0.3

# API rate limiting
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_BURST=20

# =============================================================================
# Embedding Model Configuration
# =============================================================================

# Primary embedding model (Voyage AI)
EMBEDDING_MODEL=voyage-large-2-instruct
VECTOR_DIMENSIONS=1024
EMBEDDING_BATCH_SIZE=128

# Model fallback settings
ENABLE_FALLBACK=true
FALLBACK_MODEL=text-embedding-3-small
FALLBACK_DIMENSIONS=1536

# =============================================================================
# Logging and Monitoring
# =============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO
LOG_FORMAT=json

# Enable detailed query logging
LOG_QUERIES=false
LOG_SLOW_QUERIES=true
SLOW_QUERY_THRESHOLD=1.0

# Health check settings
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10

# =============================================================================
# Performance and Caching
# =============================================================================

# Enable result caching
ENABLE_CACHE=true
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# Vector index settings
VECTOR_INDEX_TYPE=ivfflat
VECTOR_INDEX_LISTS=100
VECTOR_INDEX_PROBES=10

# =============================================================================
# Security Settings
# =============================================================================

# API authentication (optional)
# API_KEY=your_secure_api_key_here
# ENABLE_API_AUTH=false

# CORS settings
CORS_ORIGINS=*
CORS_METHODS=GET,POST
CORS_HEADERS=*

# =============================================================================
# Development and Testing
# =============================================================================

# Development mode settings
DEBUG=false
RELOAD=false

# Test database (for running tests)
TEST_DATABASE_URL=postgresql://memory_user:memory_pass@localhost:5432/memory_store_test

# Sample data settings
LOAD_SAMPLE_DATA=false
SAMPLE_DATA_PATH=/app/sample-docs
